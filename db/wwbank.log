/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DELETE FROM DATABASECHANGELOGLOCK WHERE ID=1
INSERT INTO DATABASECHANGELOGLOCK VALUES(1,TRUE,'2015-08-21 14:42:43.758000','fe80:0:0:0:250:56ff:fec0:8%7 (fe80:0:0:0:250:56ff:fec0:8%7)')
COMMIT
ALTER TABLE "PUBLIC"."ACCOUNT" DROP CONSTRAINT "ACCOUNT_PERSON_FK"
ALTER TABLE "PUBLIC"."PERSON" DROP CONSTRAINT "PERSON_ADDRESS_PK"
DROP SEQUENCE "PUBLIC"."ACCOUNTS_SEQUENCE"
DROP SEQUENCE "PUBLIC"."ADDRESSES_SEQUENCE"
DROP SEQUENCE "PUBLIC"."PERSONS_SEQUENCE"
DROP SEQUENCE "PUBLIC"."TRANSACTIONS_SEQUENCE"
DROP SEQUENCE "PUBLIC"."USERS_SEQUENCE"
DROP TABLE "PUBLIC"."ACCOUNT"
DROP TABLE "PUBLIC"."ADDRESS"
DROP TABLE "PUBLIC"."PERSON"
DROP TABLE "PUBLIC"."TRANSACTION"
DROP TABLE "PUBLIC"."USERS"
DROP TABLE "PUBLIC"."DATABASECHANGELOG"
DROP TABLE "PUBLIC"."DATABASECHANGELOGLOCK"
CREATE TABLE PUBLIC.DATABASECHANGELOGLOCK (ID INT NOT NULL, LOCKED BOOLEAN NOT NULL, LOCKGRANTED TIMESTAMP, LOCKEDBY VARCHAR(255), CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID))
INSERT INTO DATABASECHANGELOGLOCK VALUES(1,FALSE,NULL,NULL)
COMMIT
DELETE FROM DATABASECHANGELOGLOCK WHERE ID=1
INSERT INTO DATABASECHANGELOGLOCK VALUES(1,TRUE,'2015-08-21 14:42:44.096000','fe80:0:0:0:250:56ff:fec0:8%7 (fe80:0:0:0:250:56ff:fec0:8%7)')
COMMIT
CREATE TABLE PUBLIC.DATABASECHANGELOG (ID VARCHAR(255) NOT NULL, AUTHOR VARCHAR(255) NOT NULL, FILENAME VARCHAR(255) NOT NULL, DATEEXECUTED TIMESTAMP NOT NULL, ORDEREXECUTED INT NOT NULL, EXECTYPE VARCHAR(10) NOT NULL, MD5SUM VARCHAR(35), DESCRIPTION VARCHAR(255), COMMENTS VARCHAR(255), TAG VARCHAR(255), LIQUIBASE VARCHAR(20), CONTEXTS VARCHAR(255), LABELS VARCHAR(255))
CREATE TABLE PUBLIC.users (id INT NOT NULL, name VARCHAR(50) NOT NULL, password VARCHAR(50) NOT NULL, active BOOLEAN DEFAULT TRUE, super_user BOOLEAN DEFAULT FALSE, first_name VARCHAR(50) NOT NULL, last_name VARCHAR(50) NOT NULL, middle_name VARCHAR(50), tab_number VARCHAR(50) NOT NULL, CONSTRAINT PK_USERS PRIMARY KEY (id), UNIQUE (name))
CREATE TABLE PUBLIC.address (id INT NOT NULL, region VARCHAR(100) NOT NULL, city VARCHAR(100) NOT NULL, street VARCHAR(100) NOT NULL, house VARCHAR(10) NOT NULL, building VARCHAR(10), flat VARCHAR(10) NOT NULL, zip_code VARCHAR(6) NOT NULL, CONSTRAINT PK_ADDRESS PRIMARY KEY (id))
CREATE TABLE PUBLIC.person (id INT NOT NULL, first_name VARCHAR(50) NOT NULL, last_name VARCHAR(50) NOT NULL, middle_name VARCHAR(50), birthday date NOT NULL, inn VARCHAR(12) NOT NULL, email VARCHAR(50), phone VARCHAR(50), address_id INT NOT NULL, CONSTRAINT PK_PERSON PRIMARY KEY (id), CONSTRAINT person_address_pk FOREIGN KEY (address_id) REFERENCES address(id), UNIQUE (address_id), UNIQUE (inn))
CREATE TABLE PUBLIC.account (id INT NOT NULL, account_number VARCHAR(20) NOT NULL, person_id INT NOT NULL, open_date TIMESTAMP NOT NULL, close_date TIMESTAMP, amount DECIMAL NOT NULL, CONSTRAINT PK_ACCOUNT PRIMARY KEY (id), CONSTRAINT account_person_fk FOREIGN KEY (person_id) REFERENCES person(id), UNIQUE (account_number))
CREATE TABLE PUBLIC.transaction (id INT NOT NULL, transaction_type INT NOT NULL, summ DECIMAL NOT NULL, source_account_number VARCHAR(20) NOT NULL, destination_account_number VARCHAR(20), message CLOB, transaction_date TIMESTAMP NOT NULL, user_id INT NOT NULL, CONSTRAINT PK_TRANSACTION PRIMARY KEY (id))
CREATE SEQUENCE PUBLIC.users_sequence AS BIGINT  START WITH 2 INCREMENT BY 1
CREATE SEQUENCE PUBLIC.addresses_sequence AS BIGINT  START WITH 4 INCREMENT BY 1
CREATE SEQUENCE PUBLIC.persons_sequence AS BIGINT  START WITH 4 INCREMENT BY 1
CREATE SEQUENCE PUBLIC.accounts_sequence AS BIGINT  START WITH 4 INCREMENT BY 1
CREATE SEQUENCE PUBLIC.transactions_sequence AS BIGINT  START WITH 4 INCREMENT BY 1
INSERT INTO DATABASECHANGELOG VALUES('init_db','asmirnov','classpath:META-INF/db/db-changelog.xml','2015-08-21 14:42:45.338000',1,'EXECUTED','7:dfa0d28b4dc2b71019003b082e837dae','createTable (x5), createSequence (x5)','Create tables',NULL,'3.4.1',NULL,NULL)
COMMIT
INSERT INTO ADDRESS VALUES(1,'\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044c','\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433','\u041b\u0435\u043d\u0438\u043d\u0441\u043a\u0438\u0439 \u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442','1','','1','111111')
INSERT INTO ADDRESS VALUES(2,'\u042f\u0440\u043e\u0441\u043b\u0430\u0432\u0441\u043a\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c','\u042f\u0440\u043e\u0441\u043b\u0430\u0432\u043b\u044c','\u043f\u0440\u043e\u0441\u043f\u0435\u043a \u041e\u043a\u0442\u044f\u0431\u0440\u044f','2','1','2','222222')
INSERT INTO ADDRESS VALUES(3,'\u041c\u043e\u0441\u043a\u0432\u0430 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044c','\u041c\u043e\u0441\u043a\u0432\u0430','\u041a\u0443\u0442\u0443\u0437\u043e\u0432\u0441\u043a\u0438\u0439 \u043f\u0440\u043e\u0441\u043f\u0435\u043a\u0442','3','2','3','333333')
INSERT INTO PERSON VALUES(1,'\u0418\u0432\u0430\u043d\u043e\u0432','\u0418\u0432\u0430\u043d','\u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447','1980-01-01','123456789123','a@test.com','999-99-99',1)
INSERT INTO PERSON VALUES(2,'\u041f\u0435\u0442\u0440\u043e\u0432','\u0421\u0435\u0440\u0433\u0435\u0439','\u0421\u0435\u0440\u0433\u0435\u0435\u0432\u0438\u0447','1982-02-02','457968792789','b@test.com','666-66-66',2)
INSERT INTO PERSON VALUES(3,'\u0421\u0438\u0434\u043e\u0440\u043e\u0432','\u041c\u0438\u0445\u0430\u0438\u043b','\u0410\u043e\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447','1983-03-03','348567102578','c@test.com','888-88-88',3)
INSERT INTO ACCOUNT VALUES(1,'12321321321',1,'2012-01-01 15:00:00.000000',NULL,1000000)
INSERT INTO ACCOUNT VALUES(2,'34534543544',1,'2012-01-01 15:00:00.000000','2012-04-01 15:00:00.000000',200000)
INSERT INTO ACCOUNT VALUES(3,'65745645656',2,'2012-01-01 15:00:00.000000',NULL,400000)
INSERT INTO USERS VALUES(1,'admin','21232f297a57a5a743894a0e4a801fc3',TRUE,TRUE,'\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440','\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440','\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440','000001')
COMMIT
INSERT INTO DATABASECHANGELOG VALUES('test_data','asmirnov','classpath:META-INF/db/db-changelog.xml','2015-08-21 14:42:45.376000',2,'EXECUTED','7:06633478d6d7531459a3e58093f3ed51','loadData (x4)','Load test data',NULL,'3.4.1',NULL,NULL)
COMMIT
DELETE FROM DATABASECHANGELOGLOCK WHERE ID=1
INSERT INTO DATABASECHANGELOGLOCK VALUES(1,FALSE,NULL,NULL)
COMMIT
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
